<UserControl x:Class="UrbanChaosMapEditor.Views.EditorTabs.LightsTab"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Inherit DataContext from MainWindow -->

    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ListView x:Name="LightsList"
                  Grid.Row="0"
                  ItemsSource="{Binding Map.Lights}"
                  SelectedIndex="{Binding Map.SelectedLightIndex, Mode=TwoWay}"
                  Loaded="LightsList_Loaded"
                  Background="#2b2b2b"
                  PreviewKeyDown="LightsList_PreviewKeyDown"
                  MouseDoubleClick="LightsList_MouseDoubleClick">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="X" Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding X}" Foreground="White"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Z" Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Z}" Foreground="White"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Y" Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Y}" Foreground="White"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Range" Width="80">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Range}" Foreground="White"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>

            <!-- Optional: quick context menu -->
            <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Copy" Click="CopyLight_Click" />
                    <MenuItem Header="Paste" Click="PasteLight_Click" />
                    <Separator/>
                    <MenuItem Header="Delete" Click="DeleteLight_Click" />
                </ContextMenu>
            </ListView.ContextMenu>
        </ListView>

        <!-- Toolbar under the list -->
        <Border Grid.Row="1" Background="#2b2b2b" Padding="6" Margin="0,6,0,6">
            <WrapPanel Orientation="Horizontal">
                <!-- Add Light -->
                <Button Width="45" Height="40" Click="AddLight_Click" Margin="0,0,6,0">
                    <Button.ToolTip>
                        <TextBlock Text="Add Light"/>
                    </Button.ToolTip>
                    <Image Source="/Assets/Icons/add.ico" Width="32" Height="32"/>
                </Button>

                <!-- Edit Light -->
                <Button x:Name="BtnEditLight"
                        Width="45" Height="40"
                        Click="EditLight_Click"
                        Margin="0,0,6,0">
                    <Button.ToolTip>
                        <TextBlock Text="Edit Light"/>
                    </Button.ToolTip>
                    <Image Source="/Assets/Icons/editlight.ico" Width="32" Height="32"/>
                </Button>

                <!-- Delete -->
                <Button Width="45" Height="40" Click="DeleteLight_Click" Margin="0,0,6,0">
                    <Button.ToolTip>
                        <TextBlock Text="Delete Light"/>
                    </Button.ToolTip>
                    <Image Source="/Assets/Icons/delete.ico" Width="32" Height="32"/>
                </Button>

                <!-- Copy / Paste -->
                <Button Width="45" Height="40" Click="CopyLight_Click" Margin="0,0,6,0">
                    <Button.ToolTip>
                        <TextBlock Text="Copy Light (Ctrl+C)"/>
                    </Button.ToolTip>
                    <Image Source="/Assets/Icons/copy.ico" Width="32" Height="32"/>
                </Button>
                <Button Width="45" Height="40" Click="PasteLight_Click" Margin="0,0,6,0">
                    <Button.ToolTip>
                        <TextBlock Text="Paste Light (Ctrl+V)"/>
                    </Button.ToolTip>
                    <Image Source="/Assets/Icons/paste.ico" Width="32" Height="32"/>
                </Button>

                <!-- Light Map Properties -->
                <Button x:Name="BtnLightMapProps"
                        Width="45" Height="40"
                        Margin="6,0,0,0"
                        Click="MapLightProps_Click">
                    <Button.ToolTip>
                        <TextBlock Text="Light Map Properties"/>
                    </Button.ToolTip>
                    <Image Source="/Assets/Icons/maplightproperties.ico" Width="32" Height="32"/>
                </Button>
            </WrapPanel>
        </Border>
    </Grid>
</UserControl>
